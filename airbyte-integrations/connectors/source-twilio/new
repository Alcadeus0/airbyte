messages_stream:
    $ref: "#/definitions/base_stream_with_pagination"
    $parameters:
      name: "messages"
      path: "/Accounts/{{stream_slice.id}}/Messages.json"
      primary_key: "sid"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
      paginator:
        $ref: "#/definitions/default_paginator"
      partition_router:
        $ref: "#/definitions/accounts_partition_router"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: "date_sent"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "PT0.000001S"
        step: "P1D"

  messages_partition_router:
    type: SubstreamPartitionRouter
    parent_stream_configs:
      - stream: "#/definitions/conferences_stream"
        parent_key: sid
        partition_field: message_id

  message_media_stream:
    $ref: "#/definitions/base_stream_with_pagination"
    $parameters:
      name: "message_media"
      path: "/Accounts/{{stream_slice.id}}/Messages/{{stream_slice.message_id}}/Media.json"
      primary_key: "sid"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
      paginator:
        $ref: "#/definitions/default_paginator"
      partition_router:
        $ref: "#/definitions/accounts_partition_router"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: "date_created"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "PT0.000001S"
        step: "P1D"
  
  usage_records_stream:
    $ref: "#/definitions/base_stream_with_pagination"
    $parameters:
      name: "usage_records"
      path: "/Accounts/{{stream_slice.id}}/Usage/Records.json"
      primary_key: 
        - "account_sid"
        - "category"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
      paginator:
        $ref: "#/definitions/default_paginator"
      partition_router:
        $ref: "#/definitions/accounts_partition_router"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: "start_date"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "PT0.000001S"
        step: "P1D"
  
  usage_triggers_stream:
    $ref: "#/definitions/base_stream_with_pagination"
    $parameters:
      name: "usage_triggers"
      path: "/Accounts/{{stream_slice.id}}/Usage/Triggers.json"
      primary_key: "sid"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
      paginator:
        $ref: "#/definitions/default_paginator"
      partition_router:
        $ref: "#/definitions/accounts_partition_router"
  
  recordings_stream:
    $ref: "#/definitions/base_stream_with_pagination"
    $parameters:
      name: "recordings"
      path: "/Accounts/{{stream_slice.id}}/Recordings.json"
      primary_key: "sid"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
      paginator:
        $ref: "#/definitions/default_paginator"
      partition_router:
        $ref: "#/definitions/accounts_partition_router"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: "date_created"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "PT0.000001S"
        step: "P1D"
  


calls_stream:
    $ref: "#/definitions/base_stream_with_pagination"
    $parameters:
      name: "alerts"
      path: "/Accounts/{{stream_slice.id}}/Calls.json"
      primary_key: "sid"
    retriever:
      $ref: "#/definitions/retriever"
      requester:
        $ref: "#/definitions/requester"
      paginator:
        $ref: "#/definitions/default_paginator"
      partition_router:
        $ref: "#/definitions/accounts_partition_router"
      incremental_sync:
        type: DatetimeBasedCursor
        cursor_field: "end_time"
        datetime_format: "%Y-%m-%dT%H:%M:%S.%f%z"
        cursor_granularity: "PT0.000001S"
        step: "P1D"
  