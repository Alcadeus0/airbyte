version: "0.29.0"

definitions:
  selector:
    extractor:
      field_path: []
  requester:
    url_base: "https://api.twilio.com"
    http_method: "GET"
    authenticator:
      type: BasicHttpAuthenticator
      username: "{{ config['account_sid'] }}"
      password: "{{ config['auth_token'] }}"
  retriever:
    record_selector:
      $ref: "#/definitions/selector"
    paginator:
      type: NoPagination
    requester:
      $ref: "#/definitions/requester"
  base_stream:
    retriever:
      $ref: "#/definitions/retriever"
  accounts_stream:
    $ref: "#/definitions/base_stream"
    $parameters:
      name: "accounts"
      path: "/2010-04-01/Accounts.json"
      primary_key: "sid"
  addresses_stream:
    $ref: "#/definitions/base_stream"
    $parameters:
      name: "addresses"
      path: "/2010-04-01/Accounts.json"
      primary_key: "sid"

streams:
  - "#/definitions/accounts_stream"
  - "#/definitions/addresses_stream"
  - "#/definitions/alerts_stream"
  - "#/definitions/applications_stream"
  - "#/definitions/available_phone_number_countries_stream"
  - "#/definitions/available_phone_numbers_local_stream"
  - "#/definitions/available_phone_numbers_mobile_stream"
  - "#/definitions/available_phone_numbers_toll_free_stream"
  - "#/definitions/calls_stream"
  - "#/definitions/conference_participants_stream"
  - "#/definitions/conferences_stream"
  - "#/definitions/conversation_messages_stream"
  - "#/definitions/conversation_participants_stream"
  - "#/definitions/conversations_stream"
  - "#/definitions/dependent_phone_numbers_stream"
  - "#/definitions/executions_stream"
  - "#/definitions/flows_tream"
  - "#/definitions/incoming_phone_numbers_stream"
  - "#/definitions/keys_stream"
  - "#/definitions/message_media_stream"
  - "#/definitions/messages_stream"
  - "#/definitions/outgoing_caller_ids_stream"
  - "#/definitions/queues_stream"
  - "#/definitions/recordings_stream"
  - "#/definitions/transcriptions_stream"
  - "#/definitions/usage_records_stream"
  - "#/definitions/usage_triggers_stream"


check:
  stream_names:
    - "accounts"
    - "addresses"
    - "alerts"
    - "applications"
    - "available_phone_number_countries"
    - "available_phone_numbers_local"
    - "available_phone_numbers_mobile"
    - "available_phone_numbers_toll_free"
    - "calls"
    - "conference_participants"
    - "conferences"
    - "conversation_messages"
    - "conversation_participants"
    - "conversations"
    - "dependent_phone_numbers"
    - "executions"
    - "flows"
    - "incoming_phone_numbers"
    - "keys"
    - "message_media"
    - "messages"
    - "outgoing_caller_ids"
    - "queues"
    - "recordings"
    - "transcriptions"
    - "usage_records"
    - "usage_triggers"
