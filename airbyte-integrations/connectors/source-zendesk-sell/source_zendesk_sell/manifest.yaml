version: "0.29.0"

definitions:
  selector:
    type: RecordSelector
    extractor:
      type: DpathExtractor
      field_path: [ "items" ]
  requester:
    type: HttpRequester
    url_base: "https://api.getbase.com/v2"
    http_method: "GET"
    authenticator:
      type: BearerAuthenticator
      api_token: "{{ config['api_token'] }}"
  retriever:
    type: SimpleRetriever
    record_selector:
      $ref: "#/definitions/selector"
    paginator:
      type: NoPagination
    requester:
      $ref: "#/definitions/requester"
  base_stream:
    type: DeclarativeStream
    retriever:
      $ref: "#/definitions/retriever"
  call_outcomes_stream:
      $ref: "#/definitions/base_stream"
      name: "call_outcomes"
      primary_key: "id"
      $parameters:
        path: "/call_outcomes"
  calls_stream:
      $ref: "#/definitions/base_stream"
      name: "calls"
      primary_key: "id"
      $parameters:
        path: "/calls"
  collaborations_stream:
      $ref: "#/definitions/base_stream"
      name: "collaborations"
      primary_key: "id"
      $parameters:
        path: "/collaborations"
  contacts_stream:
      $ref: "#/definitions/base_stream"
      name: "contacts"
      primary_key: "id"
      $parameters:
        path: "/contacts"
  deal_sources_stream:
      $ref: "#/definitions/base_stream"
      name: "deal_sources"
      primary_key: "id"
      $parameters:
        path: "/deal_sources"
  deal_unqualified_reasons_stream:
      $ref: "#/definitions/base_stream"
      name: "deal_unqualified_reasons"
      primary_key: "id"
      $parameters:
        path: "/deal_unqualified_reasons"
  deals_stream:
      $ref: "#/definitions/base_stream"
      name: "deals"
      primary_key: "id"
      $parameters:
        path: "/deals"
  lead_conversions_stream:
      $ref: "#/definitions/base_stream"
      name: "lead_conversions"
      primary_key: "id"
      $parameters:
        path: "/lead_conversions"
  lead_sources_stream:
      $ref: "#/definitions/base_stream"
      name: "lead_sources"
      primary_key: "id"
      $parameters:
        path: "/lead_sources"
  lead_unqualified_reasons_stream:
      $ref: "#/definitions/base_stream"
      name: "lead_unqualified_reasons"
      primary_key: "id"
      $parameters:
        path: "/lead_unqualified_reasons"
  leads_stream:
      $ref: "#/definitions/base_stream"
      name: "leads"
      primary_key: "id"
      $parameters:
        path: "/leads"
  loss_reasons_stream:
      $ref: "#/definitions/base_stream"
      name: "loss_reasons"
      primary_key: "id"
      $parameters:
        path: "/loss_reasons"
  notes_stream:
      $ref: "#/definitions/base_stream"
      name: "notes"
      primary_key: "id"
      $parameters:
        path: "/notes"
  orders_stream:
      $ref: "#/definitions/base_stream"
      name: "orders"
      primary_key: "id"
      $parameters:
        path: "/orders"
  pipelines_stream:
      $ref: "#/definitions/base_stream"
      name: "pipelines"
      primary_key: "id"
      $parameters:
        path: "/pipelines"
  products_stream:
      $ref: "#/definitions/base_stream"
      name: "products"
      primary_key: "id"
      $parameters:
        path: "/products"
  stages_stream:
      $ref: "#/definitions/base_stream"
      name: "stages"
      primary_key: "id"
      $parameters:
        path: "/stages"
  tags_stream:
      $ref: "#/definitions/base_stream"
      name: "tags"
      primary_key: "id"
      $parameters:
        path: "/tags"
  tasks_stream:
      $ref: "#/definitions/base_stream"
      name: "tasks"
      primary_key: "id"
      $parameters:
        path: "/tasks"
  text_messages_stream:
      $ref: "#/definitions/base_stream"
      name: "text_messages"
      primary_key: "id"
      $parameters:
        path: "/text_messages"
  users_stream:
      $ref: "#/definitions/base_stream"
      name: "users"
      primary_key: "id"
      $parameters:
        path: "/users"
  visit_outcomes_stream:
      $ref: "#/definitions/base_stream"
      name: "visit_outcomes"
      primary_key: "id"
      $parameters:
        path: "/visit_outcomes"
  visits_stream:
      $ref: "#/definitions/base_stream"
      name: "visits"
      primary_key: "id"
      $parameters:
        path: "/visits"

streams:
  - "#/definitions/call_outcomes_stream"
  - "#/definitions/calls_stream"
  - "#/definitions/collaborations_stream"
  - "#/definitions/contacts_stream"
  - "#/definitions/deal_sources_stream"
  - "#/definitions/deal_unqualified_reasons_stream"
  - "#/definitions/deals_stream"
  - "#/definitions/lead_conversions_stream"
  - "#/definitions/lead_sources_stream"
  - "#/definitions/lead_unqualified_reasons_stream"
  - "#/definitions/leads_stream"
  - "#/definitions/loss_reasons_stream"
  - "#/definitions/notes_stream"
  - "#/definitions/orders_stream"
  - "#/definitions/pipelines_stream"
  - "#/definitions/products_stream"
  - "#/definitions/stages_stream"
  - "#/definitions/tags_stream"
  - "#/definitions/tasks_stream"
  - "#/definitions/text_messages_stream"
  - "#/definitions/users_stream"
  - "#/definitions/visit_outcomes_stream"
  - "#/definitions/visits_stream"  

check:
  type: CheckStream
  stream_names:
    - "call_outcomes"
    - "calls"
    - "collaborations"
    - "contacts"
    - "deal_sources"
    - "deal_unqualified_reasons"
    - "deals"
    - "lead_Conversions"
    - "lead_sources"
    - "lead_unqualified_reasons"
    - "leads"
    - "loss_reasons"
    - "notes"
    - "orders"
    - "pipelines"
    - "products"
    - "stages"
    - "tags"
    - "tasks"
    - "text_messages"
    - "users"
    - "visit_outcomes"
    - "visits"

spec:
  type: Spec
  documentationUrl: https://docs.airbyte.com/integrations/sources/zendesk-sell
  connection_specification:
    $schema: http://json-schema.org/draft-07/schema#
    title: Source Zendesk Sell Spec
    type: object
    required:
      - api_token
    properties:
      api_token:
        title: API token
        type: string
        description: "The API token for authenticating to Zendesk Sell"
        examples:
          - "f23yhd630otl94y85a8bf384958473pto95847fd006da49382716or937ruw059"
        airbyte_secret: true